### 计算机工作原理

计算机系统由硬件系统和软件系统两大部分组成。计算机硬件由运算器、控制器、存储器、输入设备和输出设备五大部分组成。

#### 硬件
* CPU:中央处理器，由控制器、运算器、寄存器组成。
* * 控制器：对输入的指令进行分析，并统一控制计算机的各个部分完成任务的部件
* * 运算器: 执行各种算数运算和逻辑运算
* * 寄存器: 用于存储参与运算的各种数据以及运算结果
* 存储器: 内存，把执行的程序和数据存入内存中。

寄存器和存储器的区别：寄存器在于CPU中，速度块，数目有限，做运算时必须将数据存入寄存器才能运算
* 输入输出设备：鼠标、键盘、硬盘
* 总线: 可以理解成主板，为以上部件提供数据传送的公用信号线。

#### 计算机操作系统
操作系统的五大功能，分别为：进程管理、文件管理、内存管理、输入输出设备管理、系统调用
1. 进程管理: 进程控制、进程同步，进程通信、进程调度等
2. 内存管理: 内存分配、内存保护和共享等
3. 文件管理: 存储空间管理、文件读写管理和保护等
4. 输入输出设备管理: 完成I/O请求
5. 系统调用: 进程的执行分2个级别用户级和系统级，系统提供各种服务，当用户进程使用到这些服务时，会产生一个中断，等待调用结束，然后再处理这个进程直到结束。

#### 进程与线程
##### 进程(资源分配的最小单位)

在程序执行过程中分配和管理资源的基本单位，时动态的。每个进程都拥有自己的CPU和其他资源，多进程可以提高计算机的利用率

有5种状态：初始态，执行态，等待态，就绪态，终止态。

进程之间的通讯方法:
* 管道: 速度慢，容量有限，只能父子进程通信
* FIFO: 速度慢
* 消息队列: 受系统限制
* 信号量: 只能用来同步
* 共享内存: 注意保持同步


##### 线程(程序执行的最小单位)

进程只能在一个时间内干一件事，如果要同时干多件事进程就无能为力了，因为要并发，所以需要有线程。比如同时执行听、说、写操作，这就是多线程的好处。


是进程的一部分，共享进程的资源，分就绪、执行、阻塞3个状态

如果这些线程中对同一变量有读又有写操作时，就会导致变量异常。

线程同步方法:
* 锁机制
* 设置优先级队列

单CPU中进程只能是并发，多CPU计算机中进程可以并行。
单CPU单核中线程只能并发，单CPU多核中线程可以并行。

##### 死锁

多进程因竞争资源而造成的一种僵局

原因
* 对系统资源的竞争
* 进程对资源请求和释放顺序不恰当

产生的条件
* 互斥条件: 进程对所请求的资源，在一段时间内这个资源只能为一个进程所占用，这样另外请求该资源的，统统都会被挂起。
* 不掠夺条件: 进程所获得的资源在未使用完之前，不能被其他进程强行夺走。
* 请求和保持条件: 保持了至少一个资源，请求了另外一个资源。
* 循环等待条件: 链中每一个进程已获得的资源同时被下一个进程所请求。

处理死锁的方法:
* 预防死锁: 破坏产生死锁的条件
* 避免死锁: 资源有序申请分配法
* 检测死锁: 设置检测机构及时检测死锁的发生
* 解除死锁: 检测出死锁后采取适当措施从死锁状态中解脱出来

#### 内存管理基础

##### 程序可执行文件的结构

一个可执行文件在内存中的结果大致分为只读部分和可读写部分，只读部分包括程序代码和常量，可读写部分分为一下4种:
* .data: 初始化了的全局变量和静态变量，python中没有静态变量的概念。
* .bss: 未初始化的全局变量和静态变量，我也不知道什么鬼！
* heap: 堆
* stack: 栈

##### 栈

是一块连续的内存区域，用于存放本地变量，内部临时变量以及有关上下文的内存区域，程序在调用时由操作系统通过入栈出栈来完成，无须手工。

栈分静态分配和动态分配，静态分配是有编译器完成的，比如局部变量的分配，动态分配有alloca函数控制，该变量离开其作用域之后被自动释放

##### 堆

是一块不连续的内存区域，是有系统用链表来存储的空闲内存地址，用来存放出栈之后其他所有的东西，对于堆来说，释放工作由程序员控制，容易产生内存溢出。

堆是动态分配的

